# ~/.bash_prompt
#
# Configure bash prompt to display
#   - timestamp
#   - user
#   - host
#   - path
#   - git branch and status
#
# Makes use of environment variables specified in
# `/etc/bash_completion.d/git`; see contents for documentation.
#
# Source in `~/.bashrc` or `~/.bash_profile`
source ~/.functions/git_type

GIT_PS1_SHOWUNTRACKEDFILES=true
GIT_PS1_SHOWDIRTYSTATE=true
GIT_PS1_SHOWUPSTREAM=true
GIT_PS1_SHOWSTASHSTATE=true

_ps1_str () {
    bwhite='\e[1m'       # set font to bold white
    bblack='\e[1;30m'    # set font to bold black (it's not really..)
    default='\e[0m'      # set font to default

    # Note the \[..\] surrounding the format codes, stops weirdness.
    str_date="\[${bblack}\][\A]\[${default}\]"
    str_who="\[${bwhite}\]\u@\h\[${default}\]"

	# Using more git variants makes for ambiguous context.
	# Invoke function git_type to prefix the type of repo.
	str_git='$(__git_ps1 '"\" (\$( git_type ):%s)\")"

    echo ${str_date}' '${str_who}':\w'${str_git}'\n\$ '
}

PS1=`_ps1_str`

unset _ps1_str
